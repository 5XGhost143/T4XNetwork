<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>T4XNetwork | Post #{{ post.postid }}</title>
    <link rel="stylesheet" href="../static/css/post.css">
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="icon" href="{{ url_for('static', filename='favicon.ico') }}" type="image/x-icon">
</head>
<body>
    <div class="background"></div>
    <div class="floating-shapes">
        <div class="shape"></div>
        <div class="shape"></div>
        <div class="shape"></div>
    </div>

    <div class="main-content">
        <div class="header">
            <div class="nav-section">
                <a href="/home" class="back-btn">‚Üê Back to Home</a>
                <div class="post-title">Post #{{ post.postid }}</div>
            </div>
            <div class="nav-links">
                <a href="/datadownload" class="nav-link">üìä Download your data</a>
                <a href="/logout" class="nav-link">üö™ Logout</a>
            </div>
        </div>

        <div class="content-area">
            <div class="post-container">
                <div class="post-header">
                    <div class="post-meta">
                        <div class="username">@{{ post.username }}</div>
                        <div class="post-date">{{ post.created_at }}</div>
                    </div>
                    <div class="post-id">ID: {{ post.postid }}</div>
                </div>

                <div class="post-content">
                    <p>{{ post.posttext }}</p>
                </div>

                <div class="post-actions">
                    <button class="like-btn" id="likeBtn" onclick="toggleLike()">
                        <span class="heart-icon">‚ù§Ô∏è</span>
                        <span class="like-count" id="likeCount">{{ post.like_count }}</span>
                    </button>
                    <button class="answer-btn" onclick="answerAndRedirect()">Answer</button>

                </div>
            </div>
        </div>
    </div>
    </div>

    <div class="toast" id="toast">Like toggled!</div>
    <script>
        let isLiked = {{ 'true' if user_liked else 'false' }};
        let currentLikeCount = {{ post.like_count }};
        const postId = {{ post.postid }};
        
    </script>
<script>
    function answerAndRedirect() {
        localStorage.setItem('triggerPlus', 'true');
        
        const answerText = `Answer from Post: ${window.location.href} -> `;
        localStorage.setItem('prefillText', answerText);

        window.location.href = "/home";
    }
</script>
<script src="../static/js/post.js"></script>
</div>
</body>
</html>